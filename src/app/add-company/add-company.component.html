<mat-tab-group color="primary" (selectedTabChange)="onChange($event)">
    <mat-tab label="Add Company">
        <div fxFlex="60%" style="margin-top: 40px;" fxLayout="row" fxLayoutAlign="center center">
            <div fxFlex="60%">
                <mat-card fxFlex="100%" fxLayout="column" fxLayoutGap="5px" fxLayoutAlign="center stretch">
                    <form [formGroup]="companyForm" #formDirective="ngForm" (ngSubmit)="onSubmit(formDirective)"
                        fxLayoutAlign="stretch" fxFlex="100%" fxLayout="column" fxLayoutGap="5px">

                        <div fxFlex="100%" fxLayout="row" fxLayoutGap="15px">
                            <mat-form-field appearance="outline" fxFlex="50%">
                                <mat-label>Company Code</mat-label>
                                <input matInput type="text" formControlName="companyCode" [(ngModel)]="Company.code">
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50%">
                                <mat-label>Company Name</mat-label>
                                <input matInput type="text" formControlName="companyName" [(ngModel)]="Company.name">
                            </mat-form-field>
                        </div>
                        <div fxFlex="100%" fxLayout="row" fxLayoutGap="15px">
                            <mat-form-field appearance="outline" fxFlex="50%">
                                <mat-label>Company Ceo</mat-label>
                                <input matInput type="text" formControlName="comapanyCeo" [(ngModel)]="Company.ceo">
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50%">
                                <mat-label>Company Turnover</mat-label>
                                <input matInput type="number" placeholder="Value must be greater than 10Cr."
                                    formControlName="comapanyTurnover" [(ngModel)]="Company.turnOver">
                            </mat-form-field>
                        </div>
                        <div fxFlex="100%" fxLayout="row" fxLayoutGap="15px">
                            <mat-form-field appearance="outline" fxFlex="50%">
                                <mat-label>Company Website</mat-label>
                                <input matInput type="text" formControlName="companyWebsite"
                                    [(ngModel)]="Company.website">
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50%">
                                <mat-label>Company Stock Exchamge</mat-label>
                                <input matInput type="text" formControlName="companySockExchange"
                                    [(ngModel)]="Company.stockExcehange">
                            </mat-form-field>
                        </div>

                        <div fxFlex="100%" fxLayout="row" fxLayoutAlign="end end">
                            <button mat-raised-button type="submit">Add Company</button>
                        </div>
                    </form>
                </mat-card>
            </div>
        </div>
    </mat-tab>

    <mat-tab label="Add Stock">
        <div fxLayout="column" fxFlex="100%">
            <div fxLayout="column" fxFlex="100%">
                <div fxFlex="100%" fxLayout="row">
                    <div fxFlex="33.33%"></div>
                    <div div fxFlex="33.33%" fxLayout="column" fxLayoutAlign="stretch">
                        <mat-form-field appearance="fill" fxFlex="33.33%">
                            <mat-label>All Company Code</mat-label>
                            <mat-select [(ngModel)]="companyCodes" (ngModelChange)="getCompanyCode($event)"
                                name="companyCodes">

                                <mat-option *ngFor="let code of allCompanyCodes" [value]="code">{{code}}</mat-option>

                            </mat-select>
                        </mat-form-field>
                    </div>

                </div>
            </div>
            <div fxLayout="column">
                <div fxFlex="60%" style="margin-top: 40px;" fxLayout="row" fxLayoutAlign="center center">
                    <div fxFlex="33%">
                        <mat-card fxFlex="100%" fxLayout="column" fxLayoutGap="5px" fxLayoutAlign="center stretch">
                        <form [formGroup]="stockForm" #formDirective="ngForm" (ngSubmit)="onStockSubmit(formDirective)"
                        fxLayoutAlign="stretch" fxFlex="100%" fxLayout="column" fxLayoutGap="5px">
                        <div fxFlex="100%" fxLayout="row" fxLayoutGap="15px">
                                <mat-form-field appearance="outline" fxFlex="100%">
                                    <mat-label>Stock Price</mat-label>
                                    <input matInput type="number"
                                        formControlName="price" [(ngModel)]="stockPrice">
                                </mat-form-field>
                                
                            </div>
                            <div fxFlex="100%" fxLayout="row" fxLayoutAlign="end end">
                                <button mat-raised-button type="submit">Add Stock</button>
                            </div>                            
                        </form>
                    </mat-card>
                    </div>
                </div>                
            </div>
        </div>
    </mat-tab>

    <mat-tab label="List All Companies">
        <div fxLayout="column" fxFlex="100%">
            <div fxLayout="column" fxFlex="100%">
                <div fxFlex="100%" fxLayout="row">
                    <div fxFlex="33.33%"></div>
                    <div div fxFlex="33.33%" fxLayout="column" fxLayoutAlign="stretch">
                        <mat-form-field appearance="fill" fxFlex="33.33%">
                            <mat-label>List All Companies</mat-label>
                            <mat-select (ngModelChange)="onItemChanged($event)" [(ngModel)]="companyCodes"
                                name="companyCodes">

                                <mat-option *ngFor="let code of allCompanyCodes" [value]="code">{{code}}</mat-option>

                            </mat-select>
                        </mat-form-field>
                    </div>

                </div>
            </div>
            <div *ngIf="isDataAvailable1" fxLayout="column">
                <div fxFlex="60%" fxLayout="row" fxLayoutAlign="center center">
                    <div fxFlex="33%">
                        <div style="margin-top: 20px;" fxFlex="100%" fxLayout="column" fxLayoutGap="15px">
                            <div fxFlex="33.33%" fxLayoutAlign="center" fxLayout="column" fxLayoutGap="15px">
                                <div fxFlex="30%">
                                    <p>Company Code: {{companyDetails1.code}}</p>
                                </div>
                                <div fxFlex="30%">
                                    <p>Company Name: {{companyDetails1.name}}</p>
                                </div>
                                <div fxFlex="30%">
                                    <br>
                                </div>
                            </div>
                            <div fxFlex="100%" fxLayoutAlign="start" fxLayout="row" fxLayoutGap="15px">
                                <mat-form-field appearance="fill" fxFlex="80%">
                                    <mat-label>Enter a date range to search company stock</mat-label>
                                    <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
                                        <input matStartDate formControlName="start" placeholder="Start date"
                                            (dateChange)="getAllStocks()">
                                        <input matEndDate formControlName="end" placeholder="End date"
                                            (dateChange)="getAllStocks()">
                                    </mat-date-range-input>
                                    <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-date-range-picker #picker></mat-date-range-picker>
                                </mat-form-field>

                                <!-- <p>Selected range: {{range.value | json}}</p> -->
                            </div>
                        </div>
                    </div>
                </div>
                <div fxFlex="100%" fxLayout="column">
                    <div fxFlex="100%" fxLayoutAlign="center" fxLayout="row">
                        <table mat-table fxFlex="33.33%" [dataSource]="dataSource1">

                            <ng-container matColumnDef="StockPrice">
                                <th mat-header-cell *matHeaderCellDef>Stock Price</th>
                                <td mat-cell *matCellDef="let element">{{element.price}}</td>
                            </ng-container>

                            <ng-container matColumnDef="Date">
                                <th mat-header-cell *matHeaderCellDef>Date</th>
                                <td mat-cell *matCellDef="let element">{{element.dateAndTime | date:'d-MMM-yyyy'}}</td>
                            </ng-container>

                            <ng-container matColumnDef="Time">
                                <th mat-header-cell *matHeaderCellDef>Time</th>
                                <td mat-cell *matCellDef="let element">{{element.dateAndTime | date:'shortTime'}}</td>
                            </ng-container>

                            <ng-container matColumnDef="loader">
                                <mat-footer-cell *matFooterCellDef>
                                    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                                </mat-footer-cell>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                        </table>
                    </div>
                    <mat-paginator fxLayoutAlign="center" class="pageScroll" [pageSizeOptions]="[5, 10, 20]"
                        showFirstLastButtons aria-label="Select page of periodic elements">
                    </mat-paginator>
                    <div fxFlex="100%" style="margin-top: 20px;" *ngIf="isStockAvailable" fxLayoutAlign="center center" fxLayout="row" fxLayoutGap="15px">
                        <div fxFlex="33.33%" fxLayout="column">
                            <div fxFlex="33.33%">
                                <p>Min: {{min}}</p>
                            </div>
                            <div fxFlex="33.33%">
                                <p>Max: {{max}}</p>
                            </div>
                            <div fxFlex="33.33%">
                                <p>Avg: {{avg}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </mat-tab>

    <mat-tab label="Search Company">
        <div fxLayout="column" fxFlex="100%">
            <div fxLayout="column" fxFlex="100%">
                <div fxFlex="100%" fxLayout="row">
                    <div fxFlex="30%"></div>
                    <div div fxFlex="30%" fxLayout="column" fxLayoutAlign="stretch">
                        <mat-form-field appearance="standard">
                            <mat-label>Search</mat-label>
                            <input matInput class="inputField" placeholder="Enter Company Code" name="inputValue"
                                [(ngModel)]="inputValue">
                        </mat-form-field>
                    </div>
                    <div fxFlex="5%" style="margin-top: 15px;" fxLayout="column">
                        <button mat-raised-button (click)="searchCompany(inputValue)">
                            <mat-icon>search</mat-icon>
                        </button>
                    </div>
                </div>

            </div>
            <div *ngIf="isDataAvailable" fxLayout="column">
                <div fxFlex="60%" style="margin-top: 40px;" fxLayout="row" fxLayoutAlign="center center">
                    <div fxFlex="65%">
                        <div fxFlex="100%" fxLayout="column">
                            <div fxFlex="100%" fxLayoutAlign="center" fxLayout="row" fxLayoutGap="15px">
                                <div fxFlex="33.33%">
                                    <p>Company Code: {{companyDetails.code}}</p>
                                </div>
                                <div fxFlex="33.33%">
                                    <p>Company Name: {{companyDetails.name}}</p>
                                </div>
                                <div fxFlex="33.33%">
                                    <p>Company CEO: {{companyDetails.ceo}}</p>
                                </div>
                            </div>
                            <div fxFlex="100%" style="margin-top: 20px;" fxLayoutAlign="center" fxLayout="row"
                                fxLayoutGap="15px">
                                <div fxFlex="33.33%">
                                    <p>Company Turnover: {{companyDetails.turnOver}}</p>
                                </div>
                                <div fxFlex="33.33%">
                                    <p>Company Website: {{companyDetails.website}}</p>
                                </div>
                                <div fxFlex="33.33%">
                                    <p>Company Stock Exchange: {{companyDetails.stockExcehange}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 20px;" fxFlex="100%" fxLayout="column" fxLayoutGap="15px">
                    <div fxFlex="100%" fxLayoutAlign="center" fxLayout="row" fxLayoutGap="15px">
                        <table mat-table fxFlex="65%" [dataSource]="dataSource">

                            <ng-container matColumnDef="StockPrice">
                                <th mat-header-cell *matHeaderCellDef>Stock Price</th>
                                <td mat-cell *matCellDef="let element">{{element.price}}</td>
                            </ng-container>

                            <ng-container matColumnDef="Date">
                                <th mat-header-cell *matHeaderCellDef>Date</th>
                                <td mat-cell *matCellDef="let element">{{element.dateAndTime | date:'d-MMM-yyyy'}}</td>
                            </ng-container>

                            <ng-container matColumnDef="Time">
                                <th mat-header-cell *matHeaderCellDef>Time</th>
                                <td mat-cell *matCellDef="let element">{{element.dateAndTime | date:'shortTime'}}</td>
                            </ng-container>

                            <ng-container matColumnDef="loader">
                                <mat-footer-cell *matFooterCellDef>
                                    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                                </mat-footer-cell>
                            </ng-container>

                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </mat-tab>
</mat-tab-group>